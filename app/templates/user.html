{% extends "base.html" %}

{% block app_content %}
    <head>
        <link rel="stylesheet"  type="text/css" href="{{ url_for('static', filename='css/summoner_layout.css') }}">
        <script src='https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js'></script>
    </head>
    
    <div class="Header">
        <div class="Face">
            <div class="ProfileIcon">
                <img src={{ user.getProfileIcon() }} class="ProfileImage">
            </div>
        </div>
        <div class="Profile">
            <div class="Information">
                <span class="Name">{{ user.username }}</span>
            </div>
        </div>
    </div>
    <div class="Main" id="Main">
        <div class="SummonerContent" style="display: block;">
            <div class="SideContent">
                <div class="TierBox">
                    <div class="SummonerRating">
                        <div class="RankedIcon">
                            {% set path=user.getTierIcon() %}
                            <img src={{ url_for('static', filename=path) }} class="Image">
                        </div>
                        <div class="RankTierInfo">
                            {% set stats=user.getStats() %}
                            {% set type, tier, rank, points=stats.get('queueType'), stats.get('tier'), 
                            stats.get('rank'), stats.get('leaguePoints') %}
                            <div class="RankType">{{ type }}</div>
                            <div class="TierRank">{{tier + ' ' + rank}}</div>
                            <div class="TierInfo">
                                <span class="LeaguePoints">{{ points ~ " LP" }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="MatchHistoryGraph">
                <canvas id="myChart" width="1000" height="400"></canvas>
                <script src="{{ url_for('static', filename='graphs/match_history.js') }}"></script>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col">
                <h2>Top Five Champions</h2>
                {% set top_five=user.getTopFiveChamps() %}
                <ul class="list-group">
                    {% for key, value in top_five.items() %}
                        <li class="list-group-item">{{key}} : {{value}}</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="card">
                <h2>Match History</h2>
                {% set match_history=user.getMatchHistory() %}
                <ul class="list-group list-group-flush">
                    {% for match in match_history %}
                        {% set outcome=match.get('outcome') %}
                        {% if outcome=='Victory' %}
                            <li class="list-group-item list-group-item-info">{{outcome}} : {{match.get('champion')}}</li>
                        {% else %}
                            <li class="list-group-item list-group-item-danger">{{outcome}} : {{match.get('champion')}}</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
{% endblock %}